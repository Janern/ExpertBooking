@{
    ViewData["Title"] = "AnyShore | Book ekspert";
}
@model BusinessModels.Expert[]
@using (Html.BeginForm("Book", "BookExpert", FormMethod.Post))
{
    <div class="section">
        <div class="container">
            <div class="row">
                <div class="twelve columns">
                    <h3>Filter</h3>
                </div>
                <div class="four columns">
                    <label for="ExpertType">Type ressurs:</label>
                    <select name="ExpertType" name="" class="u-full-width">
                        <option value=".net">.Net</option>
                        <option value="java">Java</option>
                        <option value="ux">UX</option>
                        <option value="tester">Tester</option>
                        <option value="python">Python</option>
                        <option value="frontend">Frontend</option>
                    </select>
                </div>
                <div class="four columns">
                    <label for="ExpertRole">Rolle:</label>
                    <select name="ExpertRole" class="u-full-width">
                        <option value="leader">Prosjektleder</option>
                        <option value="senior">Senior</option>
                        <option value="junior">Junior</option>
                    </select>
                </div>
                <div class="four columns">
                    <label for="TimePeriod">Forventet periode:</label>
                    <input type="text" name="TimePeriod" value=""/>
                </div>
            </div>
            <div class="twelve columns">
                <button type="button" id="fetchDataButton">Fetch JSON Data</button>
            </div>
            <div class="row" id="expertTable">
                <!-- placeholder for json from controller -->
            </div>
            <div class="row">
                <div class="four columns">
                    <label for="Description">Beskrivelse av prosjektet:</label>
                    <textarea  type="text" name="Description" value=""></textarea>
                </div>
                <div class="four columns">
                    <label for="BookerEmailAddress">Din Epostadresse:</label>
                    <input type="text" name="BookerEmailAddress" value="" />
                </div>
            </div>
            <div class="row">
                <div class="twelve columns">
                    <input type="submit" class="button-primary" value="Bestill"/>
                </div>
            </div>
        </div>
    </div>
}
@section scripts {
    <script>
        $('input[name="TimePeriod"]').daterangepicker();
        $(document).ready(function () {
        $('#fetchDataButton').click(function () {
            $.ajax({
                url: '/ListExperts/JsonData',
                type: 'GET',
                dataType: 'json',
                success: function (data) {
                    console.log(data);
                    $('#expertTable').empty();
                    $.each(JSON.parse(data), function (index, expert) {
                        var row = '<div class="four columns">';
                        row += '<img src="images/'+
                        expert.Id+
                        '.jpg" class="expert-table-img" />'
                        row += '<span class="expertLabel">Navn: </span>'+
                            '<span class="expertAttribute"> '+
                                expert.FirstName +' '+ expert.LastName +
                            '</span><br/>';
                        row += '<span class="expertLabel">Rolle: </span>'+
                            '<span class="expertAttribute"> '+
                                expert.Role +
                            '</span><br/>';
                        row += '<span class="expertLabel">Teknologi: </span>' +
                            '<span class="expertAttribute"> '+ expert.Technology +
                            '</span><br/>'
                        row += '</div>'
                        $('#expertTable').append(row);
                    });
                },
                error: function () {
                    console.error('Error fetching JSON data.');
                }
            });
        });
    });
   </script>
}